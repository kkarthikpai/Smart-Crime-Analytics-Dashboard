<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Top Crime Types - Dashboard</title>
    
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.3/dist/chart.umd.min.js"></script>
    <style>
        body { margin: 0; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: #f4f6f9; color: #333; }
        .navbar { display: flex; justify-content: space-between; align-items: center; background: #1a237e; padding: 10px 20px; color: white; box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1); position: sticky; top: 0; z-index: 20; }
        .navbar h1 { margin: 0; font-size: 24px; font-weight: 600; }
        .nav-links { display: flex; gap: 25px; }
        .nav-links a { color: white; text-decoration: none; font-size: 16px; transition: color 0.3s; }
        .nav-links a:hover { color: #a5d6a7; }
        .dropdown { position: relative; display: inline-block; }
        .dropbtn { background: none; border: none; color: white; font-size: 16px; cursor: pointer; padding: 0; }
        .dropdown-content { display: none; position: absolute; background: white; min-width: 200px; box-shadow: 0px 8px 16px rgba(0,0,0,0.2); z-index: 10; right: 0; }
        .dropdown-content a { color: #333; padding: 12px 16px; text-decoration: none; display: block; }
        .dropdown-content a:hover { background: #e0e0e0; }
        .dropdown:hover .dropdown-content { display: block; }

        .dashboard-container { padding: 20px; max-width: 1000px; margin: 20px auto; background: #fff; border-radius: 8px; box-shadow: 0 4px 8px rgba(0, 0, 0, 0.05); }
        .chart-area { height: 600px; }
        h2 { color: #1a237e; border-bottom: 2px solid #a5d6a7; padding-bottom: 10px; margin-top: 0; font-size: 24px; text-align: center; }
    </style>
</head>
<body>
    <div class="navbar">
        <h1>Smart Crime Analytics Dashboard</h1>
        <div class="nav-links">
            <a href="index.html">Home</a>
            <div class="dropdown">
                <button class="dropbtn">Analytics â–¼</button>
                <div class="dropdown-content">
                    <a href="yearly_trend.html">Crime Trend (Yearly)</a>
                    <a href="top_crimes.html" style="background: #e0e0e0; color: #1a237e; font-weight: bold;">Top Crime Types</a>
                    <a href="top_cities.html">City Hotspots</a>
                    <a href="district_analysis.html">District Analysis</a> 
                </div>
            </div>
            <a href="about.html">About</a>
        </div>
    </div>

    <div class="dashboard-container">
        <h2>Top 10 Violent Crime Types</h2>
        <div class="chart-area">
            <canvas id="topCrimesChart"></canvas>
        </div>
    </div>

    <script>
        // Data for the 15 violent crime types (kept all 15 for sorting logic, but only top 10 are used)
        const crimeData = [
            { crime: "Kidnapping and Abduction", incidents: 13984 },
            { crime: "Robbery", incidents: 5554 },
            { crime: "Grievous Hurt", incidents: 4793 },
            { crime: "Rape", incidents: 3633 },
            { crime: "Attempt to Commit Murder", incidents: 3592 },
            { crime: "Murder", incidents: 2031 },
            { crime: "Rioting", incidents: 1399 },
            { crime: "Attempt to Commit Culpable Homicide", incidents: 1057 },
            { crime: "Arson", incidents: 419 },
            { crime: "Dowry Deaths", incidents: 381 },
            { crime: "Culpable Homicide not amounting to Murder", incidents: 273 },
            { crime: "Dacoity", incidents: 183 },
            { crime: "Attempt to Commit Rape", incidents: 39 },
            { crime: "Foeticide", incidents: 16 },
            { crime: "Infanticide", incidents: 13 }
        ];

        // Red/Maroon gradient colors (Darkest to Lightest for Top 10)
        const RED_GRADIENT_COLORS = [
            'rgba(136, 0, 0, 0.9)',   // 1. Darkest
            'rgba(150, 15, 15, 0.9)', 
            'rgba(165, 30, 30, 0.9)', 
            'rgba(180, 45, 45, 0.9)', 
            'rgba(195, 60, 60, 0.9)', 
            'rgba(210, 75, 75, 0.9)', 
            'rgba(225, 90, 90, 0.9)', 
            'rgba(240, 105, 105, 0.9)', 
            'rgba(255, 120, 120, 0.9)',
            'rgba(255, 135, 135, 0.9)'  // 10. Lightest
        ];
        // Border colors are the same shades but full opacity
        const BORDER_GRADIENT_COLORS = RED_GRADIENT_COLORS.map(c => c.replace('0.9', '1'));


        function renderChart() {
            // Sort data in DESCENDING order to place the highest bar at the top of the horizontal chart.
            const sortedData = crimeData.sort((a, b) => b.incidents - a.incidents);
            
            // FILTER: Keep only the top 10 crimes
            const top10Data = sortedData.slice(0, 10);

            const labels = top10Data.map(d => d.crime);
            const dataCounts = top10Data.map(d => d.incidents);

            // Assign the gradient colors directly, since the data is already sorted from highest (index 0) to lowest (index 9)
            const backgroundColors = RED_GRADIENT_COLORS;
            const borderColors = BORDER_GRADIENT_COLORS;


            const chartCtx = document.getElementById('topCrimesChart').getContext('2d');
            
            new Chart(chartCtx, {
                type: 'bar',
                data: {
                    labels: labels,
                    datasets: [{
                        label: 'Total Incidents',
                        data: dataCounts,
                        backgroundColor: backgroundColors,
                        borderColor: borderColors,
                        borderWidth: 1
                    }]
                },
                options: {
                    indexAxis: 'y', // Horizontal bar chart
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        x: { 
                            beginAtZero: true, 
                            title: { 
                                display: true, 
                                text: 'Total Incidents',
                                font: { size: 14 }
                            }
                        },
                        y: {
                            title: {
                                display: true,
                                text: 'Crime Type',
                                font: { size: 14 }
                            }
                        }
                    },
                    plugins: { 
                        legend: { display: false },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    let label = context.dataset.label || '';
                                    if (label) {
                                        label += ': ';
                                    }
                                    if (context.parsed.x !== null) {
                                        label += context.parsed.x.toLocaleString(); // Add comma separators
                                    }
                                    return label;
                                }
                            }
                        }
                    }
                }
            });
        }

        document.addEventListener('DOMContentLoaded', renderChart);
    </script>
</body>
</html>